/* --- SFLOW TOOLBAR --- */
.sflow-toolbar-inline {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: 12px;
    height: 100%;
    font-family: 'Roboto', sans-serif;
    border: none !important;
    /* Ensure no border artifacts */
}

/* Icons Base */
.sflow-icon-btn {
    background: transparent;
    border: none;
    color: #5f6368;
    padding: 8px;
    margin: 0 2px;
    border-radius: 6px;
    /* Squircle looks more modern than circle */
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.sflow-icon-btn:hover {
    background: rgba(0, 0, 0, 0.06);
    color: #202124;
    transform: translateY(-1px);
}

.sflow-icon-btn:active {
    transform: translateY(1px);
    background: rgba(0, 0, 0, 0.12);
}

.sflow-icon-btn svg {
    transition: transform 0.2s;
}

.sflow-icon-btn:hover svg {
    transform: scale(1.1);
}

/* =========================================
   CUSTOM TOOLTIPS - Much more visible!
   ========================================= */

.sflow-tooltip {
    position: relative;
}

.sflow-tooltip::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: -35px;
    left: 50%;
    transform: translateX(-50%);
    background: #1a1a2e;
    color: #ffffff;
    padding: 6px 12px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 500;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 10000;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Arrow pointing up */
.sflow-tooltip::before {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    border: 6px solid transparent;
    border-bottom-color: #1a1a2e;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.2s ease, visibility 0.2s ease;
    z-index: 10000;
}

.sflow-tooltip:hover::after,
.sflow-tooltip:hover::before {
    opacity: 1;
    visibility: visible;
}

/* Theme-aware tooltips */
body[class*="sflow-theme-"] .sflow-tooltip::after {
    background: var(--bg-secondary, #21222C);
    color: var(--fg-primary, #F8F8F2);
    border: 1px solid var(--border-color, #44475A);
}

body[class*="sflow-theme-"] .sflow-tooltip::before {
    border-bottom-color: var(--bg-secondary, #21222C);
}

/* Special positioning for elements at edges */
.sflow-toolbar-inline .sflow-control-group:first-child .sflow-tooltip::after {
    left: 0;
    transform: translateX(0);
}

.sflow-toolbar-inline .sflow-control-group:first-child .sflow-tooltip::before {
    left: 16px;
    transform: translateX(0);
}

.sflow-toolbar-inline .sflow-control-group:last-child .sflow-tooltip::after {
    left: auto;
    right: 0;
    transform: translateX(0);
}

.sflow-toolbar-inline .sflow-control-group:last-child .sflow-tooltip::before {
    left: auto;
    right: 16px;
    transform: translateX(0);
}

/* Force all SFlow icons to use Stroke, NO Fill (Fixes white circle issue) */
body[class*="sflow-theme-"] .sflow-toolbar-inline .sflow-icon-btn svg,
body[class*="sflow-theme-"] .sflow-toolbar-inline .sflow-icon-btn svg * {
    fill: none !important;
    stroke: var(--fg-primary) !important;
    width: 20px;
    height: 20px;
    display: block;
}

/* Explicitly transparent background for trigger icon */
.sflow-trigger-icon {
    background: transparent !important;
}

/* Select Dropdown */
#sflow-theme-select {
    appearance: none;
    background-color: transparent;
    border: 1px solid transparent;
    padding: 6px 10px;
    font-size: 13px;
    font-weight: 500;
    color: #5f6368;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s;
    text-align: center;
}

#sflow-theme-select:hover {
    background: rgba(0, 0, 0, 0.04);
    color: #202124;
}

/* Modal */
.sflow-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    z-index: 10000;
    display: flex;
    justify-content: center;
    align-items: center;
}

.sflow-modal {
    background: #fff;
    color: #333;
    width: 600px;
    max-width: 90%;
    border-radius: 8px;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    display: flex;
    flex-direction: column;
    max-height: 80vh;
}

.sflow-modal-header {
    padding: 15px 20px;
    border-bottom: 1px solid #ccc;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sflow-modal-header h2 {
    margin: 0;
    font-size: 18px;
}

.sflow-close-btn {
    background: none;
    border: none;
    color: #999;
    font-size: 20px;
    cursor: pointer;
}

.sflow-modal-body {
    padding: 20px;
    overflow-y: auto;
}


/* =========================================
   THEME VARIABLES & DEFINITIONS
   ========================================= */

/* Dark Mode Common Overrides (Fallback) */
body[class*="sflow-theme-"] {
    --bg-primary: #1e1e1e;
    --bg-secondary: #252526;
    --fg-primary: #d4d4d4;
    --fg-secondary: #cccccc;
    --border-color: #3c3c3c;
    --accent-color: #007acc;
    --bg-selection: #264f78;

    /* Default syntax colors (VS Code Dark+) */
    --syntax-foreground: #d4d4d4;
    --syntax-variable: #9cdcfe;
    --syntax-comment: #6a9955;
    --syntax-keyword: #569cd6;
    --syntax-string: #ce9178;
    --syntax-function: #dcdcaa;
    --syntax-number: #b5cea8;
    --syntax-type: #4ec9b0;
    --syntax-property: #9cdcfe;
    --syntax-operator: #d4d4d4;
    --syntax-constant: #4fc1ff;

    /* Legacy / Compat Alias */
    --background-color: var(--bg-primary);
}

/* =========================================
   1. DRACULA THEME (Official Complete UI)
   https://draculatheme.com
   ========================================= */
body.sflow-theme-dracula {
    /* === CORE COLORS === */
    --bg-primary: #1E1F29;
    --bg-dark: #14151B;
    --bg-secondary: #282A36;
    --fg-primary: #FFFFFF;
    --fg-secondary: #94A3D3;
    --accent-color: #D4B3FF;
    --accent-secondary: #FF92DF;
    --color-info: #8BE9FD;
    /* Info (Cyan) */
    --color-success: #50FA7B;
    /* Success (Green) */
    --color-warning: #F1FA8C;
    /* Warning (Yellow) */
    --color-danger: #FF5555;
    /* Danger (Red) */
    --color-highlight: #FFB86C;
    /* Highlight (Orange) */

    /* === INTERACTIVE STATES === */
    --hover-overlay: #44475A88;
    --active-overlay: #44475ACC;
    --focus-ring: #BD93F9;

    /* === SYNTAX COLORS === */
    --syntax-foreground: #F8F8F2;
    /* Main text */
    --syntax-comment: #6272A4;
    /* Comment - blue-grey */
    --syntax-keyword: #FF79C6;
    /* Pink - keywords */
    --syntax-string: #50FA7B;
    /* Green - strings */
    --syntax-function: #8BE9FD;
    /* Cyan - function, class */
    --syntax-number: #BD93F9;
    /* Purple - number, boolean */
    --syntax-variable: #F1FA8C;
    /* Yellow - variable */
    --syntax-constant: #FFB86C;
    /* Orange - constant */
    --syntax-type: #8BE9FD;
    /* Cyan - class/type */
    --syntax-operator: #FF79C6;
    /* Pink - operators */
    --syntax-error: #FF5555;
    /* Red - error */
}

/* =========================================
   2. MONOKAI THEME (Official)
   Based on Sublime Text Monokai
   ========================================= */
body.sflow-theme-monokai {
    /* === CORE COLORS === */
    --bg-primary: #191919;
    --bg-dark: #121212;
    --bg-secondary: #252525;
    --fg-primary: #FFFFFF;
    --fg-secondary: #939293;
    --accent-color: #C1FF22;
    --accent-secondary: #FF1493;
    --color-info: #66d9ef;
    /* Blue */
    --color-success: #a6e22e;
    /* Green */
    --color-warning: #e6db74;
    /* Yellow */
    --color-danger: #f92672;
    /* Red/Pink */
    --color-highlight: #fd971f;
    /* Orange */

    /* === INTERACTIVE STATES === */
    --hover-overlay: #49483e88;
    --active-overlay: #49483ecc;
    --focus-ring: #a6e22e;

    /* === SYNTAX COLORS - Official Monokai === */
    --syntax-foreground: #F8F8F2;
    --syntax-variable: #F8F8F2;
    --syntax-comment: #75715E;
    /* Official Monokai comment */
    --syntax-keyword: #F92672;
    /* Pink/Red */
    --syntax-string: #E6DB74;
    /* Yellow */
    --syntax-function: #A6E22E;
    /* Green */
    --syntax-number: #AE81FF;
    /* Purple */
    --syntax-type: #A6E22E;
    /* Green (Class/Type) */
    --syntax-constant: #66D9EF;
    /* Cyan */
    --syntax-property: #A6E22E;
    /* Green */
    --syntax-operator: #F92672;
    /* Pink/Red */
    --syntax-error: #F92672;
    /* Pink/Red */
}

/* =========================================
   3. NORD THEME (Official)
   https://www.nordtheme.com
   ========================================= */
body.sflow-theme-nord {
    /* === CORE COLORS - Polar Night === */
    --bg-primary: #242933;
    --bg-dark: #1B1E25;
    --bg-secondary: #3B4252;
    --bg-hover: #434c5e;
    --border-color: #4c566a;
    --bg-selection: #434c5e;
    /* nord2 */

    --fg-primary: #FFFFFF;
    --fg-secondary: #9FE9FF;
    --fg-disabled: #4c566a;

    --accent-color: #9FE9FF;
    --accent-secondary: #88C0D0;
    /* nord9 */
    --color-info: #88c0d0;
    /* nord8 */
    --color-success: #a3be8c;
    /* nord14 Aurora Green */
    --color-warning: #ebcb8b;
    /* nord13 Aurora Yellow */
    --color-danger: #bf616a;
    /* nord11 Aurora Red */
    --color-highlight: #d08770;
    /* nord12 Aurora Orange */

    /* === INTERACTIVE STATES === */
    --hover-overlay: #434c5e88;
    --active-overlay: #434c5ecc;
    --focus-ring: #88c0d0;

    /* === SYNTAX COLORS - Official Nord === */
    --syntax-foreground: #D8DEE9;
    /* nord4 */
    --syntax-variable: #D8DEE9;
    /* nord4 */
    --syntax-comment: #616E88;
    /* Dimmed */
    --syntax-keyword: #81A1C1;
    /* nord9 */
    --syntax-string: #A3BE8C;
    /* nord14 Aurora Green */
    --syntax-function: #88C0D0;
    /* nord8 Frost */
    --syntax-number: #B48EAD;
    /* nord15 Aurora Purple */
    --syntax-type: #8FBCBB;
    /* nord7 */
    --syntax-constant: #EBCB8B;
    /* nord13 Aurora Yellow */
    --syntax-property: #D8DEE9;
    /* nord4 */
    --syntax-operator: #81A1C1;
    /* nord9 */
    --syntax-error: #BF616A;
    /* nord11 Aurora Red */
}


/* =========================================
   APPLICATION OF VARIABLES (GLOBAL)
   ========================================= */

body[class*="sflow-theme-"] {
    background-color: var(--bg-primary) !important;
    color: var(--fg-primary) !important;
}

/* Toolbar Buttons & Text */
body[class*="sflow-theme-"] .sflow-icon-btn {
    color: var(--fg-primary);
}

body[class*="sflow-theme-"] #sflow-theme-select {
    color: var(--fg-primary);
}

body[class*="sflow-theme-"] .sflow-divider-vertical {
    background: var(--border-color);
}

/* Sidebar & Structure Overrides */
body[class*="sflow-theme-"] div[role="navigation"],
body[class*="sflow-theme-"] .goog-splitpane-first-container,
body[class*="sflow-theme-"] .layout-vertical>.layout-horizontal:first-child {
    background-color: var(--bg-secondary) !important;
    border-right: 1px solid var(--border-color) !important;
}

/* ===========================================
   SIDEBAR TEXT - FORCE ALL TEXT WHITE
   =========================================== */

/* Target ALL text in sidebar area - aggressive wildcard */
body[class*="sflow-theme-"] div[role="navigation"] *,
body[class*="sflow-theme-"] .goog-splitpane-first-container *,
body[class*="sflow-theme-"] .layout-vertical>div:first-child * {
    color: var(--fg-primary) !important;
    opacity: 1 !important;
}

/* Specifically target sidebar headers (Files, Libraries, Services) */
body[class*="sflow-theme-"] .feature-header,
body[class*="sflow-theme-"] .lb-header,
body[class*="sflow-theme-"] [class*="header"],
body[class*="sflow-theme-"] [class*="section-header"],
body[class*="sflow-theme-"] [class*="panel-header"] {
    background-color: var(--bg-secondary) !important;
    color: var(--fg-primary) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

body[class*="sflow-theme-"] .feature-header *,
body[class*="sflow-theme-"] .lb-header *,
body[class*="sflow-theme-"] [class*="header"] span,
body[class*="sflow-theme-"] [class*="header"] div {
    color: var(--fg-primary) !important;
    opacity: 1 !important;
}

/* Section titles like "Files", "Libraries", "Services" - specific GAS class */
body[class*="sflow-theme-"] .y2Opbf,
body[class*="sflow-theme-"] [class*="y2Opbf"],
body[class*="sflow-theme-"] [class*="section"]>span,
body[class*="sflow-theme-"] [class*="section"]>div,
body[class*="sflow-theme-"] [class*="title"],
body[class*="sflow-theme-"] [class*="label"] {
    color: var(--fg-primary) !important;
    opacity: 1 !important;
}

/* Navigation/Sidebar Items */
body[class*="sflow-theme-"] div[role="treeitem"],
body[class*="sflow-theme-"] .lb-name,
body[class*="sflow-theme-"] .lb-item {
    color: var(--fg-primary) !important;
    opacity: 1 !important;
}

/* ===========================================
   SIDEBAR SELECTION - CLEAN STYLING
   =========================================== */

/* Selected Item - Theme compliant (GAS-specific classes) */
/* File list uses <li role="option"> with .UeVsd class for selected items */
body[class*="sflow-theme-"] li[role="option"][aria-selected="true"],
body[class*="sflow-theme-"] li.UeVsd {
    background: linear-gradient(90deg, var(--accent-color) 0%, var(--accent-color) 3px, var(--bg-selection) 3px, var(--bg-selection) 100%) !important;
    border-radius: 4px !important;
    margin: 2px 4px !important;
}

/* Selected item text - use accent color */
body[class*="sflow-theme-"] li[role="option"][aria-selected="true"] *,
body[class*="sflow-theme-"] li.UeVsd * {
    color: var(--accent-color) !important;
    background-color: transparent !important;
}

/* Treeitem selected (for other areas) */
body[class*="sflow-theme-"] div[role="treeitem"][aria-selected="true"],
body[class*="sflow-theme-"] .lb-item[aria-selected="true"] {
    background-color: var(--bg-selection) !important;
    border-left: 3px solid var(--accent-color) !important;
    border-radius: 4px !important;
}

body[class*="sflow-theme-"] div[role="treeitem"][aria-selected="true"] *,
body[class*="sflow-theme-"] .lb-item[aria-selected="true"] * {
    color: var(--accent-color) !important;
}

/* Left nav icon selection (hcgnWc = selected state) - circular selection */
body[class*="sflow-theme-"] .hcgnWc .mtgyif,
body[class*="sflow-theme-"] .kcW8jf.hcgnWc .mtgyif {
    background: var(--bg-selection) !important;
    border-radius: 50% !important;
}

/* Override the ::before pseudo element that creates white circle */
body[class*="sflow-theme-"] .hcgnWc .mtgyif::before,
body[class*="sflow-theme-"] .hcgnWc .mtgyif::after,
body[class*="sflow-theme-"] .kcW8jf.hcgnWc::before,
body[class*="sflow-theme-"] .kcW8jf.hcgnWc::after {
    background-color: transparent !important;
    background: transparent !important;
}

/* Left nav icons - keep white color */
body[class*="sflow-theme-"] .kcW8jf .google-material-icons,
body[class*="sflow-theme-"] .mtgyif i,
body[class*="sflow-theme-"] .hcgnWc i,
body[class*="sflow-theme-"] .hcgnWc svg,
body[class*="sflow-theme-"] .kcW8jf svg {
    color: var(--fg-primary) !important;
    fill: var(--fg-primary) !important;
}

/* Hover State - uses hover overlay */
body[class*="sflow-theme-"] div[role="treeitem"]:hover,
body[class*="sflow-theme-"] .lb-item:hover {
    background-color: var(--hover-overlay, rgba(68, 71, 90, 0.5)) !important;
}

/* Icons in sidebar - including + buttons */
body[class*="sflow-theme-"] div[role="treeitem"] svg,
body[class*="sflow-theme-"] .lb-icon,
body[class*="sflow-theme-"] [class*="header"] svg,
body[class*="sflow-theme-"] [class*="header"] button,
body[class*="sflow-theme-"] .y2Opbf+button,
body[class*="sflow-theme-"] button[aria-label*="add"],
body[class*="sflow-theme-"] button[aria-label*="Add"] {
    fill: var(--fg-primary) !important;
    color: var(--fg-primary) !important;
    opacity: 0.8;
}

/* ===========================================
   TOP TOOLBAR
   =========================================== */

body[class*="sflow-theme-"] div[role="banner"],
body[class*="sflow-theme-"] header {
    background-color: var(--bg-secondary) !important;
    color: var(--fg-primary) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

/* Force ALL toolbar elements to be white */
body[class*="sflow-theme-"] div[role="banner"] *,
body[class*="sflow-theme-"] header *,
body[class*="sflow-theme-"] div[role="toolbar"] *,
body[class*="sflow-theme-"] [class*="toolbar"] * {
    color: var(--fg-primary) !important;
    fill: var(--fg-primary) !important;
}

/* Specifically target Run, Debug, Execution log buttons */
body[class*="sflow-theme-"] button[aria-label],
body[class*="sflow-theme-"] div[role="button"],
body[class*="sflow-theme-"] [role="menuitem"] {
    color: var(--fg-primary) !important;
}

/* Icons in toolbar */
body[class*="sflow-theme-"] div[role="banner"] svg,
body[class*="sflow-theme-"] header svg,
body[class*="sflow-theme-"] div[role="toolbar"] svg {
    fill: var(--fg-primary) !important;
    color: var(--fg-primary) !important;
}

/* Toolbar button hover - use hover overlay */
body[class*="sflow-theme-"] .sflow-icon-btn:hover,
body[class*="sflow-theme-"] div[role="button"]:hover {
    background-color: var(--hover-overlay, rgba(68, 71, 90, 0.5)) !important;
}

/* Focus ring for buttons */
body[class*="sflow-theme-"] button:focus,
body[class*="sflow-theme-"] .sflow-icon-btn:focus {
    outline: 2px solid var(--focus-ring, var(--accent-color)) !important;
    outline-offset: 2px;
}


/* =========================================
   MONACO EDITOR - BACKGROUND & GUTTER
   ========================================= */

body[class*="sflow-theme-"] .monaco-editor,
body[class*="sflow-theme-"] .monaco-editor-background,
body[class*="sflow-theme-"] .monaco-editor .inputarea.ime-input {
    background-color: var(--bg-primary) !important;
}

body[class*="sflow-theme-"] .monaco-editor .margin,
body[class*="sflow-theme-"] .monaco-editor .margin-view-overlays {
    background-color: var(--bg-primary) !important;
}

body[class*="sflow-theme-"] .monaco-editor .margin-view-overlays .line-numbers {
    color: var(--fg-secondary) !important;
}

body[class*="sflow-theme-"] .monaco-editor .current-line {
    background: var(--bg-selection) !important;
    border: none !important;
}

body[class*="sflow-theme-"] .monaco-editor .cursor {
    background-color: var(--accent-color) !important;
    border-color: var(--accent-color) !important;
}

/* Editor Selection */
body[class*="sflow-theme-"] .monaco-editor .selected-text {
    background-color: var(--bg-selection) !important;
}

/* Indent Guide Lines - subtle thin lines matching comment color */
body[class*="sflow-theme-"] .monaco-editor .lines-content .cigr,
body[class*="sflow-theme-"] .monaco-editor .lines-content .cigra,
body[class*="sflow-theme-"] .monaco-editor .view-overlays .cigr,
body[class*="sflow-theme-"] .monaco-editor .view-overlays .cigra,
body[class*="sflow-theme-"] .monaco-editor .indentGuide,
body[class*="sflow-theme-"] .monaco-editor .core-guide {
    background: transparent !important;
    box-shadow: 1px 0 0 0 var(--syntax-comment) inset !important;
    opacity: 0.3;
}

/* Active indent guide - slightly more visible */
body[class*="sflow-theme-"] .monaco-editor .cigra,
body[class*="sflow-theme-"] .monaco-editor .core-guide-indent-active {
    background: transparent !important;
    box-shadow: 1px 0 0 0 var(--syntax-comment) inset !important;
    opacity: 0.5;
}


/* =========================================
   EXECUTION LOG PANEL
   ========================================= */

/* Main container */
body[class*="sflow-theme-"] .Kp2okb,
body[class*="sflow-theme-"] .R06Qgb {
    background-color: var(--bg-secondary) !important;
    border-left: 1px solid var(--border-color) !important;
}

/* Title "Execution log" */
body[class*="sflow-theme-"] .oLvPce {
    color: var(--fg-primary) !important;
    font-weight: 500;
    padding: 8px 12px !important;
    border-bottom: 1px solid var(--border-color) !important;
    background: var(--bg-primary) !important;
}

/* Log list container */
body[class*="sflow-theme-"] .gwHZe {
    background-color: var(--bg-primary) !important;
}

/* Individual log row */
body[class*="sflow-theme-"] .fHhrY {
    background-color: transparent !important;
    border-bottom: 1px solid var(--border-color) !important;
    padding: 4px 8px !important;
}

body[class*="sflow-theme-"] .fHhrY:hover {
    background-color: var(--hover-overlay) !important;
}

/* Log columns common style */
body[class*="sflow-theme-"] .lNXgjb {
    color: var(--fg-primary) !important;
}

/* Timestamp column */
body[class*="sflow-theme-"] .Akkarb {
    color: var(--fg-secondary) !important;
    opacity: 0.7;
}

/* Log type - Notice (start/complete) */
body[class*="sflow-theme-"] .ptNZqd .ACpDpe {
    color: var(--accent-color) !important;
    font-weight: 600;
}

/* Log type - Info */
body[class*="sflow-theme-"] .CTiAXc .ACpDpe {
    color: var(--syntax-string) !important;
}

/* Log message */
body[class*="sflow-theme-"] .BjuRcd {
    color: var(--fg-primary) !important;
}

/* Notice log rows - subtle accent background */
body[class*="sflow-theme-"] .fHhrY.ptNZqd {
    background-color: rgba(var(--accent-rgb, 139, 233, 253), 0.1) !important;
    border-left: 3px solid var(--accent-color) !important;
}

/* Close button */
body[class*="sflow-theme-"] .R06Qgb .VfPpkd-Bz112c-LgbsSe {
    color: var(--fg-primary) !important;
}

body[class*="sflow-theme-"] .R06Qgb .VfPpkd-Bz112c-LgbsSe:hover {
    background-color: var(--hover-overlay) !important;
}

/* =========================================
   GOOGLE TOOLBAR (Run, Debug, Save, etc.)
   ========================================= */

/* Toolbar container */
body[class*="sflow-theme-"] .NGQehb {
    background-color: var(--bg-secondary) !important;
}

/* Button groups */
body[class*="sflow-theme-"] .yggLIc {
    background-color: transparent !important;
}

/* All toolbar buttons */
body[class*="sflow-theme-"] .RO63ad button,
body[class*="sflow-theme-"] .VfPpkd-LgbsSe {
    color: var(--fg-primary) !important;
}

/* Button icons (Material Icons) */
body[class*="sflow-theme-"] .RO63ad .VfPpkd-kBDsod,
body[class*="sflow-theme-"] .RO63ad .google-material-icons {
    color: var(--fg-primary) !important;
}

/* SVG Icons in toolbar */
body[class*="sflow-theme-"] .RO63ad .NSy2Hd,
body[class*="sflow-theme-"] .RO63ad .TQNnQ {
    fill: var(--fg-primary) !important;
}

/* Button text (Run, Debug, Stop, Execution log) */
body[class*="sflow-theme-"] .RO63ad .VfPpkd-vQzf8d {
    color: var(--fg-primary) !important;
}

/* Disabled buttons - more subtle */
body[class*="sflow-theme-"] .RO63ad button[disabled],
body[class*="sflow-theme-"] .RO63ad button[disabled] i,
body[class*="sflow-theme-"] .RO63ad button[disabled] .TQNnQ {
    color: var(--fg-secondary) !important;
    fill: var(--fg-secondary) !important;
    opacity: 0.5;
}

/* Button hover state */
body[class*="sflow-theme-"] .RO63ad button:not([disabled]):hover {
    background-color: var(--hover-overlay) !important;
}

/* Run button - accent color when enabled */
body[class*="sflow-theme-"] button[jsname="XvjrTb"]:not([disabled]) i,
body[class*="sflow-theme-"] button[jsname="XvjrTb"]:not([disabled]) .VfPpkd-vQzf8d {
    color: var(--syntax-string) !important;
    /* Green for Run */
}

/* Stop button - red when visible */
body[class*="sflow-theme-"] button[jsname="GVC9cd"]:not([disabled]) i,
body[class*="sflow-theme-"] button[jsname="GVC9cd"]:not([disabled]) .VfPpkd-vQzf8d {
    color: #FF5555 !important;
    /* Red for Stop */
}

/* Function dropdown */
body[class*="sflow-theme-"] .jgvuAb.VsRsme {
    background-color: var(--bg-primary) !important;
    border: 1px solid var(--border-color) !important;
    color: var(--fg-primary) !important;
}

body[class*="sflow-theme-"] .jgvuAb .vRMGwf {
    color: var(--fg-primary) !important;
}

/* Function dropdown menu */
body[class*="sflow-theme-"] .OA0qNb.ncFHed {
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
}

/* Dropdown items */
body[class*="sflow-theme-"] .MocG8c {
    color: var(--fg-primary) !important;
    background-color: transparent !important;
}

body[class*="sflow-theme-"] .MocG8c:hover {
    background-color: var(--hover-overlay) !important;
}

body[class*="sflow-theme-"] .MocG8c[aria-selected="true"] {
    background-color: var(--bg-selection) !important;
    color: var(--accent-color) !important;
}

/* Execution log button when active */
body[class*="sflow-theme-"] button[jsname="mCW24e"] {
    background-color: var(--bg-selection) !important;
}

body[class*="sflow-theme-"] button[jsname="mCW24e"] .VfPpkd-vQzf8d {
    color: var(--accent-color) !important;
}

/* =========================================
   FILTER/SEARCH INPUTS
   ========================================= */

/* Trigger filter input - only colors, preserve size */
body[class*="sflow-theme-"] .Ax4B8,
body[class*="sflow-theme-"] input.ZAGvjd,
body[class*="sflow-theme-"] input[aria-label*="filter"] {
    background-color: var(--bg-secondary) !important;
    color: var(--fg-primary) !important;
    border: 1px solid var(--border-color) !important;
}

body[class*="sflow-theme-"] .Ax4B8::placeholder,
body[class*="sflow-theme-"] input.ZAGvjd::placeholder {
    color: var(--fg-secondary) !important;
    opacity: 0.7;
}

body[class*="sflow-theme-"] .Ax4B8:focus,
body[class*="sflow-theme-"] input.ZAGvjd:focus {
    border-color: var(--accent-color) !important;
    outline: none !important;
    box-shadow: 0 0 0 2px rgba(var(--accent-rgb, 139, 233, 253), 0.2) !important;
}

/* "Add a filter" Label and Placeholder */
body[class*="sflow-theme-"] .PK2PH {
    color: #ffffff !important;
    opacity: 0.9;
    z-index: 1;
    /* Ensure it stays above input background but below text */
    pointer-events: none;
    /* Let clicks pass through to input */
}

/* The "+" icon inside "Add a filter" */
body[class*="sflow-theme-"] .PK2PH .DPvwYc,
body[class*="sflow-theme-"] .PK2PH .Ce1Y1c {
    color: #ffffff !important;
}

/* Container for the filter input to ensure no weird white backgrounds */
body[class*="sflow-theme-"] .d1dlne,
body[class*="sflow-theme-"] .L6J0Pc {
    background-color: transparent !important;
}

/* Ensure the disabled/hidden input behind doesn't interfere */
body[class*="sflow-theme-"] .yNVtPc {
    background-color: transparent !important;
    border: none !important;
}

/* Google autocomplete dropdown container */
body[class*="sflow-theme-"] [role="listbox"][aria-label*="filter"],
body[class*="sflow-theme-"] .aXBtI,
body[class*="sflow-theme-"] .VfPpkd-xl07Ob-XxIAqe,
body[class*="sflow-theme-"] ul[jsname="wIVhvb"],
body[class*="sflow-theme-"] .VfPpkd-suEOdc {
    background-color: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
}

/* Autocomplete dropdown items */
body[class*="sflow-theme-"] [role="listbox"] [role="option"],
body[class*="sflow-theme-"] .VfPpkd-OkbHre,
body[class*="sflow-theme-"] .u3WVdc li,
body[class*="sflow-theme-"] .VfPpkd-StrnGf-rymPhb-IhFlZd {
    color: var(--fg-primary) !important;
    background-color: transparent !important;
}

body[class*="sflow-theme-"] [role="listbox"] [role="option"]:hover,
body[class*="sflow-theme-"] .VfPpkd-OkbHre:hover {
    background-color: var(--hover-overlay) !important;
}

body[class*="sflow-theme-"] [role="listbox"] [role="option"][aria-selected="true"],
body[class*="sflow-theme-"] .VfPpkd-OkbHre[aria-selected="true"] {
    background-color: var(--bg-selection) !important;
    color: var(--accent-color) !important;
}

/* Autocomplete item text */
body[class*="sflow-theme-"] .VfPpkd-StrnGf-rymPhb-b9t22c,
body[class*="sflow-theme-"] [role="option"] span {
    color: var(--fg-primary) !important;
}

/* =========================================
   SYNTAX HIGHLIGHTING - GAS MONACO SPECIFIC
   ========================================= */

/* 
   Mappings verified by DOM inspection on Google Apps Script editor:
   - mtk5  = Numbers
   - mtk7  = Strings
   - mtk11 = Comments
   - mtk16 = Functions & Variables (identifiers)
   - mtk19 = Keywords
*/

/* mtk5 - NUMBERS (Purple) */
body[class*="sflow-theme-"] .monaco-editor .mtk5 {
    color: var(--syntax-number) !important;
}

/* mtk7 - STRINGS (Green for Dracula) */
body[class*="sflow-theme-"] .monaco-editor .mtk7 {
    color: var(--syntax-string) !important;
}

/* mtk11 - COMMENTS (Blue-Grey, Italic) */
body[class*="sflow-theme-"] .monaco-editor .mtk11 {
    color: var(--syntax-comment) !important;
    font-style: italic;
}

/* mtk16 - VARIABLES (Yellow for Dracula) */
body[class*="sflow-theme-"] .monaco-editor .mtk16 {
    color: var(--syntax-variable) !important;
}

/* =========================================================================
   PROJECT OVERVIEW / DASHBOARD PAGE TRADITIONAL FIXES
   ========================================================================= */

/* Main Cards (7 Day Summary, Health, Project Details) */
body[class*="sflow-theme-"] .g3VIld,
body[class*="sflow-theme-"] .Wvd84e,
body[class*="sflow-theme-"] .ZZhnYe,
body[class*="sflow-theme-"] .vKkXhe,
body[class*="sflow-theme-"] .OkCl1d,
body[class*="sflow-theme-"] .g3VIld>div {
    /* Target direct children too */
    background-color: var(--bg-secondary) !important;
    color: var(--fg-primary) !important;
    box-shadow: none !important;
    border-color: var(--border-color) !important;
}

/* 
   Aggressive fixes for inner white containers (often used in Google Charts/Cards).
   Targeting any div inside the main card that explicitly has a white background.
*/
body[class*="sflow-theme-"] .g3VIld div[style*="background-color: rgb(255, 255, 255)"],
body[class*="sflow-theme-"] .g3VIld div[style*="background-color: white"],
body[class*="sflow-theme-"] .g3VIld div[style*="background: white"],
body[class*="sflow-theme-"] .g3VIld rect[fill="#ffffff"],
body[class*="sflow-theme-"] .g3VIld rect[fill="#fff"],
body[class*="sflow-theme-"] .g3VIld rect[fill="white"] {
    background-color: var(--bg-secondary) !important;
    fill: var(--bg-secondary) !important;
}

/* Specific fix for the top blue header */
body[class*="sflow-theme-"] .vKkXhe {
    background-color: var(--bg-secondary) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

/* Typography on cards */
body[class*="sflow-theme-"] .g3VIld h1,
body[class*="sflow-theme-"] .g3VIld h2,
body[class*="sflow-theme-"] .g3VIld h3,
body[class*="sflow-theme-"] .Wvd84e div {
    color: var(--fg-primary) !important;
}

/* Secondary text */
body[class*="sflow-theme-"] .g3VIld .A9jyad,
body[class*="sflow-theme-"] .PNenzf,
body[class*="sflow-theme-"] .p9Nwte,
body[class*="sflow-theme-"] .fKz7Od {
    color: var(--fg-secondary) !important;
    fill: var(--fg-secondary) !important;
}

/* Icons in Project Details */
body[class*="sflow-theme-"] .g3VIld svg,
body[class*="sflow-theme-"] .Wvd84e svg {
    fill: var(--fg-primary) !important;
}

/* 
   CHARTS & GRAPHS 
   Google Charts usually use inline SVG/VML. 
   We need to attack the text and lines, and remove white backgrounds.
*/

/* Chart Container Background */
body[class*="sflow-theme-"] .g3VIld rect[fill="#ffffff"],
body[class*="sflow-theme-"] .g3VIld rect[fill="#fff"] {
    fill: var(--bg-secondary) !important;
}

/* Chart Text (Axis labels, Legend) */
body[class*="sflow-theme-"] .g3VIld text {
    fill: var(--fg-secondary) !important;
}

/* Chart Gridlines */
body[class*="sflow-theme-"] .g3VIld path[stroke="#e6e6e6"],
body[class*="sflow-theme-"] .g3VIld line[stroke="#e6e6e6"] {
    stroke: var(--border-color) !important;
}

/* 7-Day Summary Big Numbers */
body[class*="sflow-theme-"] .tOrNgd {
    color: var(--fg-primary) !important;
}

/* "Apps Script" Large Icon Container */
body[class*="sflow-theme-"] .lWgMpf {
    background-color: transparent !important;
}

/* mtk19 - KEYWORDS (Pink, Bold) */
body[class*="sflow-theme-"] .monaco-editor .mtk19 {
    color: var(--syntax-keyword) !important;
    font-weight: 600;
}

/* Fallback for other mtk classes - use foreground */
body[class*="sflow-theme-"] .monaco-editor .mtk1,
body[class*="sflow-theme-"] .monaco-editor .mtk2,
body[class*="sflow-theme-"] .monaco-editor .mtk3,
body[class*="sflow-theme-"] .monaco-editor .mtk4,
body[class*="sflow-theme-"] .monaco-editor .mtk6,
body[class*="sflow-theme-"] .monaco-editor .mtk8,
body[class*="sflow-theme-"] .monaco-editor .mtk9,
body[class*="sflow-theme-"] .monaco-editor .mtk10,
body[class*="sflow-theme-"] .monaco-editor .mtk12,
body[class*="sflow-theme-"] .monaco-editor .mtk13,
body[class*="sflow-theme-"] .monaco-editor .mtk14,
body[class*="sflow-theme-"] .monaco-editor .mtk15,
body[class*="sflow-theme-"] .monaco-editor .mtk17,
body[class*="sflow-theme-"] .monaco-editor .mtk18,
body[class*="sflow-theme-"] .monaco-editor .mtk20,
body[class*="sflow-theme-"] .monaco-editor .mtk21,
body[class*="sflow-theme-"] .monaco-editor .mtk22 {
    color: var(--syntax-foreground) !important;
}


/* =========================================
   SCROLLBARS & MISC
   ========================================= */

body[class*="sflow-theme-"] .monaco-scrollable-element>.scrollbar>.slider {
    background: var(--hover-overlay, rgba(255, 255, 255, 0.2)) !important;
    border-radius: 4px;
}

body[class*="sflow-theme-"] .monaco-scrollable-element>.scrollbar>.slider:hover {
    background: var(--active-overlay, rgba(255, 255, 255, 0.3)) !important;
}

/* =========================================
   MODAL - DRACULA UI STYLED
   ========================================= */

body[class*="sflow-theme-"] .sflow-modal-overlay {
    background: var(--bg-dark, #191A21) !important;
    background: rgba(25, 26, 33, 0.8) !important;
}

body[class*="sflow-theme-"] .sflow-modal {
    background: var(--bg-secondary) !important;
    color: var(--fg-primary) !important;
    border: 1px solid var(--border-color) !important;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
}

body[class*="sflow-theme-"] .sflow-modal-header {
    background: var(--bg-primary) !important;
    border-bottom: 1px solid var(--border-color) !important;
}

body[class*="sflow-theme-"] .sflow-modal-header h2 {
    color: var(--fg-primary) !important;
}

body[class*="sflow-theme-"] .sflow-close-btn {
    color: var(--fg-secondary) !important;
}

body[class*="sflow-theme-"] .sflow-close-btn:hover {
    color: var(--color-danger, #FF5555) !important;
}

/* =========================================
   PHASE 1 FEATURES - NEW STYLES
   ========================================= */

/* Toolbar Divider */
.sflow-divider {
    width: 1px;
    height: 20px;
    background-color: #dadce0;
    margin: 0 4px;
}

body[class*="sflow-theme-"] .sflow-divider {
    background-color: var(--border-color) !important;
}

/* Font Selector Dropdown */
#sflow-font-select {
    appearance: none;
    background-color: transparent;
    border: 1px solid transparent;
    padding: 6px 10px;
    font-size: 13px;
    font-weight: 500;
    color: #5f6368;
    border-radius: 4px;
    cursor: pointer;
    transition: background 0.2s;
}

#sflow-font-select:hover {
    background: rgba(0, 0, 0, 0.04);
    color: #202124;
}

body[class*="sflow-theme-"] #sflow-font-select {
    color: var(--fg-primary);
}

/* Active Button State */
.sflow-icon-btn.active {
    background: rgba(189, 147, 249, 0.2) !important;
    color: #BD93F9 !important;
}

body[class*="sflow-theme-"] .sflow-icon-btn.active {
    background: rgba(var(--accent-color), 0.2) !important;
}

body[class*="sflow-theme-"] .sflow-icon-btn.active svg,
body[class*="sflow-theme-"] .sflow-icon-btn.active svg * {
    stroke: var(--accent-color) !important;
}

/* =========================================
   ZEN MODE - FULLSCREEN FOCUS
   ========================================= */

body.sflow-zen-mode {
    overflow: hidden !important;
}

/* Hide everything except the editor */
body.sflow-zen-mode div[role="banner"],
body.sflow-zen-mode header,
body.sflow-zen-mode div[role="navigation"],
body.sflow-zen-mode .goog-splitpane-first-container,
body.sflow-zen-mode .layout-vertical>.layout-horizontal:first-child,
body.sflow-zen-mode [class*="sidebar"],
body.sflow-zen-mode [class*="header"],
body.sflow-zen-mode [class*="footer"],
body.sflow-zen-mode .feature-header,
body.sflow-zen-mode .lb-header {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
}

/* Make editor fullscreen */
body.sflow-zen-mode .monaco-editor,
body.sflow-zen-mode .editor-scrollable,
body.sflow-zen-mode [class*="editor-container"],
body.sflow-zen-mode .goog-splitpane-second-container {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9998 !important;
}

/* Keep toolbar visible in Zen Mode for easy exit */
body.sflow-zen-mode #sflow-toolbar {
    position: fixed !important;
    top: 10px !important;
    right: 10px !important;
    z-index: 9999 !important;
    background: var(--bg-secondary, #282A36) !important;
    padding: 8px 12px !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    opacity: 0.3;
    transition: opacity 0.3s ease;
}

body.sflow-zen-mode #sflow-toolbar:hover {
    opacity: 1;
}

/* Zen Mode Exit Hint */
body.sflow-zen-mode::after {
    content: "Press ESC or F11 to exit Zen Mode";
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.7);
    color: #fff;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 12px;
    z-index: 9999;
    opacity: 0;
    animation: zenHintFade 3s ease-in-out;
    pointer-events: none;
}

@keyframes zenHintFade {

    0%,
    70% {
        opacity: 1;
    }

    100% {
        opacity: 0;
    }
}

/* =========================================
   COMMAND PALETTE
   ========================================= */

.sflow-palette-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 10001;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding-top: 15vh;
}

.sflow-palette-container {
    width: 500px;
    max-width: 90vw;
    background: #282A36;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
    overflow: hidden;
    animation: paletteSlideIn 0.15s ease-out;
}

@keyframes paletteSlideIn {
    from {
        opacity: 0;
        transform: translateY(-20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.sflow-palette-input {
    width: 100%;
    padding: 16px 20px;
    font-size: 16px;
    background: transparent;
    border: none;
    border-bottom: 1px solid #44475A;
    color: #F8F8F2;
    outline: none;
    box-sizing: border-box;
}

.sflow-palette-input::placeholder {
    color: #6272A4;
}

.sflow-palette-results {
    max-height: 300px;
    overflow-y: auto;
}

.sflow-palette-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px;
    cursor: pointer;
    transition: background 0.1s;
}

.sflow-palette-item:hover,
.sflow-palette-item.selected {
    background: #44475A;
}

.sflow-palette-name {
    color: #F8F8F2;
    font-size: 14px;
}

.sflow-palette-shortcut {
    color: #6272A4;
    font-size: 12px;
    background: #21222C;
    padding: 2px 8px;
    border-radius: 4px;
    font-family: monospace;
}

/* Theme-aware Command Palette */
body.sflow-theme-monokai .sflow-palette-container {
    background: #272822;
}

body.sflow-theme-monokai .sflow-palette-input {
    border-bottom-color: #49483e;
}

body.sflow-theme-monokai .sflow-palette-item:hover,
body.sflow-theme-monokai .sflow-palette-item.selected {
    background: #49483e;
}

body.sflow-theme-nord .sflow-palette-container {
    background: #2e3440;
}

body.sflow-theme-nord .sflow-palette-input {
    border-bottom-color: #4c566a;
}

body.sflow-theme-nord .sflow-palette-item:hover,
body.sflow-theme-nord .sflow-palette-item.selected {
    background: #434c5e;
}

/* =========================================
   PHASE 2: SNIPPET MANAGER MODAL
   ========================================= */

.sflow-snippet-container {
    width: 600px;
    max-width: 90vw;
    max-height: 70vh;
    background: #282A36;
    border-radius: 12px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    animation: paletteSlideIn 0.15s ease-out;
}

.sflow-snippet-header {
    padding: 16px 20px;
    background: #21222C;
    border-bottom: 1px solid #44475A;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.sflow-snippet-header h3 {
    margin: 0;
    color: #F8F8F2;
    font-size: 16px;
    font-weight: 600;
}

.sflow-snippet-hint {
    color: #6272A4;
    font-size: 12px;
}

.sflow-snippet-search {
    padding: 12px 20px;
    border-bottom: 1px solid #44475A;
}

.sflow-snippet-input {
    width: 100%;
    padding: 10px 14px;
    font-size: 14px;
    background: #21222C;
    border: 1px solid #44475A;
    border-radius: 6px;
    color: #F8F8F2;
    outline: none;
    box-sizing: border-box;
}

.sflow-snippet-input:focus {
    border-color: #BD93F9;
}

.sflow-snippet-input::placeholder {
    color: #6272A4;
}

.sflow-snippet-list {
    flex: 1;
    overflow-y: auto;
    padding: 8px 0;
}

.sflow-snippet-item {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    gap: 12px;
    cursor: default;
    transition: background 0.1s;
}

.sflow-snippet-item:hover {
    background: #44475A;
}

.sflow-snippet-trigger {
    background: #BD93F9;
    color: #282A36;
    padding: 4px 10px;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 600;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    min-width: 60px;
    text-align: center;
}

.sflow-snippet-arrow {
    color: #6272A4;
    font-size: 14px;
}

.sflow-snippet-code {
    color: #50FA7B;
    font-size: 13px;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.sflow-snippet-footer {
    padding: 12px 20px;
    background: #21222C;
    border-top: 1px solid #44475A;
    display: flex;
    justify-content: flex-end;
}

.sflow-btn {
    background: #BD93F9;
    color: #282A36;
    border: none;
    padding: 8px 20px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
}

.sflow-btn:hover {
    background: #CFA9FF;
}

/* Theme variants for Snippet Manager */
body.sflow-theme-monokai .sflow-snippet-container {
    background: #272822;
}

body.sflow-theme-monokai .sflow-snippet-header,
body.sflow-theme-monokai .sflow-snippet-footer {
    background: #1e1f1c;
}

body.sflow-theme-monokai .sflow-snippet-trigger {
    background: #a6e22e;
}

body.sflow-theme-monokai .sflow-snippet-code {
    color: #e6db74;
}

body.sflow-theme-nord .sflow-snippet-container {
    background: #2e3440;
}

body.sflow-theme-nord .sflow-snippet-header,
body.sflow-theme-nord .sflow-snippet-footer {
    background: #242933;
}

body.sflow-theme-nord .sflow-snippet-trigger {
    background: #88c0d0;
    color: #2e3440;
}

body.sflow-theme-nord .sflow-snippet-code {
    color: #a3be8c;
}

/* =========================================
   SNIPPET AUTOCOMPLETE POPUP
   ========================================= */

.sflow-autocomplete-popup {
    position: fixed;
    z-index: 10002;
    min-width: 280px;
    max-width: 450px;
    max-height: 320px;
    background: #282A36;
    border: 1px solid #44475A;
    border-radius: 8px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    overflow-y: auto;
    display: none;
    animation: acPopupIn 0.1s ease-out;
}

@keyframes acPopupIn {
    from {
        opacity: 0;
        transform: translateY(-8px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.sflow-autocomplete-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 14px;
    cursor: pointer;
    border-bottom: 1px solid #44475A;
    transition: background 0.1s;
}

.sflow-autocomplete-item:last-child {
    border-bottom: none;
}

.sflow-autocomplete-item:hover,
.sflow-autocomplete-item.selected {
    background: #44475A;
}

.sflow-autocomplete-item.selected {
    background: #6272A4;
}

.sflow-ac-trigger {
    color: #BD93F9;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 13px;
    min-width: 70px;
}

.sflow-ac-trigger strong {
    color: #FF79C6;
}

.sflow-ac-preview {
    color: #6272A4;
    font-size: 12px;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Theme variants */
body.sflow-theme-monokai .sflow-autocomplete-popup {
    background: #272822;
    border-color: #49483e;
}

body.sflow-theme-monokai .sflow-autocomplete-item {
    border-bottom-color: #49483e;
}

body.sflow-theme-monokai .sflow-autocomplete-item.selected {
    background: #49483e;
}

body.sflow-theme-monokai .sflow-ac-trigger {
    color: #a6e22e;
}

body.sflow-theme-monokai .sflow-ac-trigger strong {
    color: #f92672;
}

body.sflow-theme-nord .sflow-autocomplete-popup {
    background: #2e3440;
    border-color: #4c566a;
}

body.sflow-theme-nord .sflow-autocomplete-item {
    border-bottom-color: #4c566a;
}

body.sflow-theme-nord .sflow-autocomplete-item.selected {
    background: #434c5e;
}

body.sflow-theme-nord .sflow-ac-trigger {
    color: #88c0d0;
}

body.sflow-theme-nord .sflow-ac-trigger strong {
    color: #bf616a;
}

/* =========================================
   AUTHORIZATION DIALOG TEXT FIX
   ========================================= */
body[class*="sflow-theme-"] .uW2Fw-k2Wrsb-fmcmS,
body[class*="sflow-theme-"] [jsname="MdSI6d"] {
    color: var(--fg-primary) !important;
}

/* =========================================
   THEMATIC TABLE STYLES
   ========================================= */

body[class*="sflow-theme-"] .sflow-table-header-themed {
    background-color: var(--bg-primary) !important;
    background: var(--bg-primary) !important;
    color: var(--accent-color) !important;
    font-weight: 800 !important;
    border-bottom: 2px solid var(--accent-color) !important;
    text-transform: uppercase;
    letter-spacing: 1px;
    font-size: 11px;
}

body[class*="sflow-theme-"] .sflow-table-header-themed * {
    color: inherit !important;
}

/* Metadata in header (like "Deployment") - slightly more muted accent */
body[class*="sflow-theme-"] .sflow-table-header-themed .nfFC5c,
body[class*="sflow-theme-"] .sflow-table-header-themed .T0UZd {
    color: var(--accent-color) !important;
    opacity: 0.9 !important;
}

body[class*="sflow-theme-"] .sflow-table-row-themed {
    background-color: var(--bg-primary) !important;
    background: var(--bg-primary) !important;
    color: var(--fg-primary) !important;
    cursor: default !important;
    /* Reset to default, only items inside might be pointers */
    transition: background-color 0.15s ease;
    border-bottom: 1px solid var(--border-color) !important;
    position: relative;
}

body[class*="sflow-theme-"] .sflow-table-row-themed:hover {
    background-color: var(--bg-secondary) !important;
    background: var(--bg-secondary) !important;
}

/* Subtle indicator on the left side of the row - VS Code style */
body[class*="sflow-theme-"] .sflow-table-row-themed::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background-color: transparent;
    transition: background-color 0.2s ease;
    z-index: 10;
}

body[class*="sflow-theme-"] .sflow-table-row-themed:hover::before {
    background-color: var(--accent-color);
}

body[class*="sflow-theme-"] .sflow-table-row-themed td {
    background-color: transparent !important;
    background: transparent !important;
    color: inherit !important;
}

/* Secondary data (like "Owned by", "Last run") */
body[class*="sflow-theme-"] .sflow-table-row-themed td:nth-child(even) {
    color: var(--fg-secondary) !important;
}

/* Specific fix for the provided HTML dump structure */
body[class*="sflow-theme-"] .sflow-table-row-themed .mUsKed,
body[class*="sflow-theme-"] .sflow-table-row-themed .rX09Ub,
body[class*="sflow-theme-"] .sflow-table-row-themed .pof95 {
    background-color: transparent !important;
    background: transparent !important;
    color: inherit !important;
}

/* Action Icons in Table */
body[class*="sflow-theme-"] .sflow-table-row-themed .DPvwYc {
    color: var(--accent-color) !important;
    transition: all 0.2s ease;
}

body[class*="sflow-theme-"] .sflow-table-row-themed:hover .DPvwYc {
    transform: scale(1.2);
    color: var(--accent-secondary) !important;
    filter: drop-shadow(0 0 5px var(--accent-color));
}
/* DROPDOWN MENUS */
body[class*="sflow-theme-"] .JAPqpe.K0NPx {
    background-color: var(--bg-secondary) !important;
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-color) !important;
    border-radius: 4px !important;
}

body[class*="sflow-theme-"] .z80M1 {
    color: var(--fg-primary) !important;
}

body[class*="sflow-theme-"] .z80M1:hover {
    background-color: var(--accent-color) !important;
    color: #FFFFFF !important;
}
